---
layout: default
---
{% assign post = page %}

<article>

    {% comment %} Icon Sizes {% endcomment %}
    <ul class="list-icons list-icons--featured">
        <li class="icon-container-xlg">
            {% if site.theme.active != 'applewatchicongallery' %}
                {% include icon.html icon-size="512" %}
            {% else %}
                {% include icon.html icon-size="256" %}
            {% endif %}
        </li>
        <li class="icon-container-lg">
            {% if site.theme.active != 'applewatchicongallery' %}
                {% include icon.html icon-size="256" %}
            {% else %}
                {% include icon.html icon-size="128" %}
            {% endif %}
        </li>
        <li class="icon-container">
            {% if site.theme.active != 'applewatchicongallery' %}
                {% include icon.html icon-size="128" %}
            {% else %}
                {% include icon.html icon-size="64" %}
            {% endif %}
        </li>
        <li class="icon-container-sm">
            {% if site.theme.active != 'applewatchicongallery' %}
                {% include icon.html icon-size="64" %}
            {% else %}
                {% include icon.html icon-size="32" %}
            {% endif %}
        </li>
        {% if site.theme.ad_script %}
            <li class="icon-container icon-container--ad">
                {{ site.theme.ad_script }}
            </li>
        {% endif %}
    </ul>

    {% comment %} Header {% endcomment %}
    <header class="icon-meta">

        {% comment %} App Name {% endcomment %}
        <h1 class="bold">
            <span class="icon-meta__left">App Name:</span>
            {% if post.itunes-url %}
                <a href="{{ post.itunes-url}}" class="icon-meta__right external-link">{{ post.title }}</a>
            {% else %}
                <span class="icon-meta__right">{{ post.title }}</span>
            {% endif %}
        </h1>

        {% comment %} Icon Meta {% endcomment %}
        <dl>
            {% comment %} Icon Designer {% endcomment %}
            {% if post.icon-designer %}
                <dt class="icon-meta__left">Icon Designer:</dt>
                <dd class="icon-meta__right">
                    {% if post.icon-designer-url %}
                        <a href="{{ post.icon-designer-url }}" class="external-link">{{ post.icon-designer }}</a>
                    {% else %}
                        {{ post.icon-designer }}
                    {% endif %}
                </dd>
            {% endif %}

            {% comment %} App Developer {% endcomment %}
            {% if post.app-developer %}
                <dt class="icon-meta__left">App Developer:</dt>
                <dd class="icon-meta__right">
                    {% if post.app-developer-url %}
                        <a href="{{ post.app-developer-url }}" class="external-link">{{ post.app-developer }}</a>
                    {% else %}
                        {{ post.app-developer}}
                    {% endif %}
                </dd>
            {% endif %}

            {% comment %} Category {% endcomment %}
            {% if post.category %}

                {% comment %} Get the Category's Nice Name {% endcomment %}
                {% for category in site.data.categories %}
                    {% if category.id == post.category %}
                        {% assign category = category.name %}
                        {% assign categoryId = category.id %}
                    {% endif %}
                {% endfor %}

                <dt class="icon-meta__left">Category:</dt>
                <dd class="icon-meta__right">
                    <a href="/search/?category={{ categoryId }}">
                        {{ category }}
                    </a>
                </dd>
            {% endif %}

            {% comment %} Tags {% endcomment %}
            {% if post.tags.size > 0 %}
                <dt class="icon-meta__left">
                    {% if post.tags.size > 1 %}
                        Colors:
                    {% else %}
                        Color:
                    {% endif %}
                </dt>
                <dd class="icon-meta__right">
                {% for tag in post.tags %}
                    <a href="/search/?tags={{tag}}">{{ tag }}</a>{% if forloop.last != true %},{% endif %}
                {% endfor %}
                </dd>
            {% endif %}

            {% comment %} Post Date {% endcomment %}
            {% if post.date %}
                <dt class="icon-meta__left">Post Date:</dt>
                <dd class="icon-meta__right">{{ post.date | date: "%b %d, %Y" }}</dd>
            {% endif %}
        </dl>
    </header>
</article>

{% comment %} Sidebar Related Posts {% endcomment %}
<aside class="module related" id="related-iconss">
    <h2>Related Icons in the category “{{ category }}”</h2>
    <ul class="list-icons">

        {% comment %}
            catId gets the current page's category in string from (int doesn't work)
            `x | rand_array` returns the following:
                - array with a length of x
                - array with unique,random values no larger than x
            Then we loop over that array giving us random posts.
            We don't display more than `limit`
            And we dont' display less than however many related posts are in the cat
        {% endcomment %}

        {% capture catId %}{{page.category}}{% endcapture %}
        {% assign posts_in_cat = site.categories.[catId] | size %}
        {% assign post_indicies = posts_in_cat | rand_array %}

        {% assign limit = 0 %}
        {% for i in post_indicies %}
            {% assign post = site.categories.[catId][i] %}

            {% if post != nil and post.title != page.title %}
                {% assign limit = limit | plus:1 %}

                {% if limit <= 12 %}
                    <li>
                        <a href="{{ post.url }}" class="icon-container">
                            {% include icon.html icon-size="128" %}
                        </a>
                    </li>
                {% endif %}
            {% endif %}

        {% endfor %}
    </ul>
</aside>
