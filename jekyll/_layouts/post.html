---
layout: default
---

{% assign post = page %}

{% comment %}
  If it has the `is-missing-512-icon` tag, that means a 512 sized icon cannot be
  guaranteed but 256 can, so we use that (likely only watchOS icons). Otherwise,
  512 size can be guaranteed so we use that (likely macOS and iOS).
{% endcomment %}

{% if post.is-missing-512-icon %}
  {% capture iconSrc %}{% include icon-src.html.liquid size="256" post=post %}{% endcapture %}
{% else %}
  {% capture iconSrc %}{% include icon-src.html.liquid size="512" post=post %}{% endcapture %}
{% endif %}

<style>
.post {
  display: flex;
  justify-content: space-evenly;
  flex-direction: column;
  align-items: center;
  padding-top: 20px;
  border-top: 1px solid #f0f0f0;
}

@media screen and (min-width: 900px) {
  .post {
    flex-direction: row;
  }
}

.post__meta {
  font-size: 16px;
  flex-grow: 2;
  max-width: 500px;
}

.post__meta h1,
.post__meta h2 {
  font-weight: 500;
}
.post__meta h1 {
  font-size: 24px;
  text-align: center;
}
.post__meta h2 {
  font-size: 18px;
}

.post__meta dt {
    width: 30%;
    margin-right: 3.3333%;
    text-align: right;
    color: #aaa;
    font-weight: 500;
    float: left;
}

.post__meta dd {
  margin-left: 33.3333%;
}

.post__meta__ad {
  overflow: auto; /* clearfix */
  width: 300px;
  height: 122px; /* 100 img + 20px padding + 2px border */
  padding: 10px;
  border: 1px solid #f0f0f0;
  margin: 20px auto 0;
}
@media screen and (min-width: 600px) {
  .post__meta__ad {
    width: 320px;
  }
}
.post__meta__ad img {
  float: left;
  margin-right: 10px;
}

.related-posts {
  margin-top: 40px;
}

.related-posts h2 {
  font-size: 18px;
  font-weight: 500;
  margin: 10px 0;
}

.related-posts .icon-list {
  margin-bottom: 40px;
}

</style>


<div class="post">

  <div class="icon-wrapper icon-wrapper--512 {% include icon-ios7-class.html.liquid classPrefix="icon-wrapper" date=post.date %}">
    <img
      alt="{{ post.title }} app icon"
      class="icon icon--512 {% include icon-ios7-class.html.liquid classPrefix="icon" date=post.date %}"
      src="{{ iconSrc }}"
      width="512"
      height="512"

      {% comment %}
        If it is missing a 512, then there won’t be a 1024 so we won’t bother
        However, a 512 isn’t missing, then we’ll put this data attribute
        which will be picked up by our JS and conditionally load a 1024
        when available.
      {% endcomment %}
      {% unless post.is-missing-512-icon %}
        data-src2x="{% include icon-src.html.liquid size="1024" post=post %}"
      {% endunless %}
    />
  </div>

  <div class="post__meta">
    <h1>{{ post.title }}</h1>

    <dl>
      <!-- Icon Designer -->
      {% if post.icon-designer %}
        <dt>Designer</dt>
        <dd>
          <a href="/search/?designer={% include id-ify.html.liquid value=post.icon-designer %}">
            {{ post.icon-designer }}
          </a>
            
          {% if post.icon-designer-url %}
            (<a href="{{ post.icon-designer-url }}" class="external-link">{{ post.icon-designer-url | replace: "http://", "" | replace: "https://", "" | replace: "www.", "" }}</a>)
          {% endif %}
        </dd>
      {% endif %}

      <!-- App Developer -->
      {% if post.app-developer %}
        <dt>Developer</dt>
        <dd>
          <a href="/search/?developer={% include id-ify.html.liquid value=post.app-developer %}">{{ post.app-developer }}</a>
          
          {% if post.app-developer-url %}
            {% comment %} All these filters help me get just the domain of the URL {% endcomment %}
            (<a href="{{ post.app-developer-url }}" class="external-link">{{ post.app-developer-url | replace: "http://", "" | replace: "https://", "" | replace: "www.", "" | url_encode | split: "%2F" | first }}</a>)
          {% endif %}
        </dd>
      {% endif %}

      <!-- Category -->
      {% if post.category %}
        <dt>Category</dt>
        <dd>
          <a href="/search/?category={{ post.category }}">
            {{ site.data.categories[post.category] }}
          </a>
        </dd>
      {% endif %}

      <!-- Tags -->
      {% if post.tags.size > 0 %}
        <dt>
          Color
          {%- if post.tags.size > 1 -%}
            s
          {%- endif -%}
        </dt>
        <dd>
          {% for tag in post.tags %}
            <a href="/search/?color={{ tag }}">{{ tag }}</a>{% if forloop.last != true %},{% endif %}
          {% endfor %}
        </dd>
      {% endif %}

      <!-- Post Date -->
      {% if post.date %}
        <dt>Posted</dt>
        <dd>{{ post.date | date: "%b %d, %Y" }}</dd>
      {% endif %}


      <dt>iTunes <!-- @TODO mac app store or what not --></dt>
      <!-- Add query string `?at=XXXX` for affliate linking -->
      <dd>
        <a href="{{ post.itunes-url }}?at=1l3vtCx">
          <img
            src="/{{ site.assets.images }}/download-on-app-store.svg"
            width="120"
            height="40"
            style="margin-top: 5px;"
          />
        </a>
      </dd>
    </dl>

    <!-- Ad -->
    <div class="post__meta__ad">
      {% include ad.html.liquid %}
    </div>
  </div>
</div>

<aside class="related-posts">
  
  <!-- Designer -->
  {% assign designerPosts = site.posts
    | where: "icon-designer", post.icon-designer
    | where_exp: "item", "item.title != post.title" %}
  {% capture designerQueryValue %}{% include id-ify.html.liquid value=designerPosts.first.icon-designer %}{% endcapture %}
  {% capture designerHeading %}More from the designer “{{ post.icon-designer }}”{% endcapture %}
  {% include related-posts.html.liquid
      queryKey="designer"
      queryValue=designerQueryValue
      currentPost=post
      relatedPosts=designerPosts
      heading=designerHeading %}
  
  <!-- Color -->
  {% assign colorPosts = site.posts
    | where: "tags", post.tags.first
    | where_exp: "item", "item.title != post.title" %}
  {% capture colorHeading %}More of the color “{{ post.tags.first }}”{% endcapture %}
  {% include related-posts.html.liquid
      queryKey="color"
      queryValue=colorPosts.first.tags.first
      currentPost=post
      relatedPosts=colorPosts
      heading=colorHeading %}

  <!-- Developer -->
  {% assign developerPosts = site.posts
    | where: "app-developer", post.app-developer
    | where_exp: "item", "item.title != post.title" %}
  {% capture developerQueryValue %}{% include id-ify.html.liquid value=developerPosts.first.app-developer %}{% endcapture %}
  {% capture developerHeading %}More from the developer “{{ post.app-developer }}”{% endcapture %}
  {% include related-posts.html.liquid
      queryKey="developer"
      queryValue=developerQueryValue
      currentPost=post
      relatedPosts=developerPosts
      heading=developerHeading %}

  <!-- Category -->
  {% assign categoryPosts = site.posts
    | where: "category", post.category
    | where_exp: "item", "item.title != post.title" %}
  {% capture categoryHeading %}More from the category “{{ site.data.categories[post.category] }}”{% endcapture %}
  {% include related-posts.html.liquid
      queryKey="category"
      queryValue=categoryPosts.first.category
      currentPost=post
      relatedPosts=categoryPosts
      heading=categoryHeading %}
</aside>

